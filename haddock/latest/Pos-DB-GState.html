<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Pos.DB.GState</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Pos-DB-GState.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Pos.DB.GState.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cryptokami-sl-0.4.4: Cryptokami SL main implementation</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Pos.DB.GState</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Operations</a></li><li><a href="#g:2">Getters</a></li><li><a href="#g:3">Initialization</a></li><li><a href="#g:4">Iteration</a></li><li><a href="#g:5">Sanity checks</a></li><li><a href="#g:6">Getters</a></li><li><a href="#g:7">Operations</a></li><li><a href="#g:8">Initialization</a></li><li><a href="#g:9">Iteration</a></li><li><a href="#g:10">Get utxo</a></li><li><a href="#g:11">Sanity checks</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>GState DB stores whole global state, i. e. result of application
 of all blocks up to <em>tip</em>.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:resolveForwardLink">resolveForwardLink</a> :: (<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Class.html#t:HasHeaderHash">HasHeaderHash</a> a, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; a -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a>)</li><li class="src short"><a href="#v:isBlockInMainChain">isBlockInMainChain</a> :: (<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Class.html#t:HasHeaderHash">HasHeaderHash</a> a, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; a -&gt; m <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:BlockExtraOp">BlockExtraOp</a><ul class="subs"><li>= <a href="#v:AddForwardLink">AddForwardLink</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a></li><li>| <a href="#v:RemoveForwardLink">RemoveForwardLink</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a></li><li>| <a href="#v:SetInMainChain">SetInMainChain</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a></li></ul></li><li class="src short"><a href="#v:loadHeadersUpWhile">loadHeadersUpWhile</a> :: (<a href="Pos-Ssc-Class.html#t:SscHelpersClass">SscHelpersClass</a> ssc, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Class.html#t:HasHeaderHash">HasHeaderHash</a> a) =&gt; a -&gt; (<a href="Pos-Types-Block-Types.html#t:BlockHeader">BlockHeader</a> ssc -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Int.html#t:Int">Int</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; m (<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Util-Chrono.html#t:OldestFirst">OldestFirst</a> [] (<a href="Pos-Types-Block-Types.html#t:BlockHeader">BlockHeader</a> ssc))</li><li class="src short"><a href="#v:loadBlocksUpWhile">loadBlocksUpWhile</a> :: (<a href="Pos-Ssc-Class.html#t:SscHelpersClass">SscHelpersClass</a> ssc, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Class.html#t:HasHeaderHash">HasHeaderHash</a> a) =&gt; a -&gt; (<a href="Pos-Types-Block-Types.html#t:Block">Block</a> ssc -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Int.html#t:Int">Int</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; m (<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Util-Chrono.html#t:OldestFirst">OldestFirst</a> [] (<a href="Pos-Types-Block-Types.html#t:Block">Block</a> ssc))</li><li class="src short"><a href="#v:prepareGStateBlockExtra">prepareGStateBlockExtra</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a> -&gt; m ()</li><li class="src short">module <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-GState-Common.html">Pos.DB.GState.Common</a></li><li class="src short"><a href="#v:prepareGStateDB">prepareGStateDB</a> :: <span class="keyword">forall</span> ssc m. (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a> -&gt; m ()</li><li class="src short"><a href="#v:sanityCheckGStateDB">sanityCheckGStateDB</a> :: <span class="keyword">forall</span> m. (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/exceptions-0.8.3/docs/Control-Monad-Catch.html#t:MonadMask">MonadMask</a> m, <a href="http://hackage.haskell.org/package/log-warper-1.1.2/docs/System-Wlog-CanLog.html#t:WithLogger">WithLogger</a> m) =&gt; m ()</li><li class="src short"><a href="#v:usingGStateSnapshot">usingGStateSnapshot</a> :: (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/exceptions-0.8.3/docs/Control-Monad-Catch.html#t:MonadMask">MonadMask</a> m) =&gt; m a -&gt; m a</li><li class="src short"><a href="#v:getPSKByIssuerAddressHash">getPSKByIssuerAddressHash</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>)</li><li class="src short"><a href="#v:getPSKByIssuer">getPSKByIssuer</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Crypto-Signing.html#t:PublicKey">PublicKey</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>)</li><li class="src short"><a href="#v:isIssuerByAddressHash">isIssuerByAddressHash</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:DelegationOp">DelegationOp</a><ul class="subs"><li>= <a href="#v:AddPSK">AddPSK</a> !<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a></li><li>| <a href="#v:DelPSK">DelPSK</a> !<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Crypto-Signing.html#t:PublicKey">PublicKey</a></li></ul></li><li class="src short"><a href="#v:runPskIterator">runPskIterator</a> :: <span class="keyword">forall</span> m a. <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-DBIterator.html#t:DBnIterator">DBnIterator</a> PskIter a -&gt; m a</li><li class="src short"><a href="#v:runPskMapIterator">runPskMapIterator</a> :: <span class="keyword">forall</span> v m a. <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-DBIterator.html#t:DBnMapIterator">DBnMapIterator</a> PskIter v a -&gt; (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterType">IterType</a> PskIter -&gt; v) -&gt; m a</li><li class="src short"><span class="keyword">data</span> <a href="#t:BalancesOp">BalancesOp</a><ul class="subs"><li>= <a href="#v:PutFtsSum">PutFtsSum</a> !<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Coin">Coin</a></li><li>| <a href="#v:PutFtsStake">PutFtsStake</a> !<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> !<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Coin">Coin</a></li></ul></li><li class="src short"><a href="#v:isBootstrapEra">isBootstrapEra</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; m <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:getEffectiveTotalStake">getEffectiveTotalStake</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; m <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Coin">Coin</a></li><li class="src short"><a href="#v:getEffectiveStake">getEffectiveStake</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Coin">Coin</a>)</li><li class="src short"><a href="#v:genesisFakeTotalStake">genesisFakeTotalStake</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Coin">Coin</a></li><li class="src short"><a href="#v:prepareGStateBalances">prepareGStateBalances</a> :: <span class="keyword">forall</span> m. <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="Pos-Txp.html#t:Utxo">Utxo</a> -&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:BalanceIter">BalanceIter</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a></li><li class="src short"><a href="#v:runBalanceIterator">runBalanceIterator</a> :: <span class="keyword">forall</span> m a. <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; (<span class="keyword">forall</span> iter. (<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Util-Iterator.html#t:MonadIterator">MonadIterator</a> (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterType">IterType</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a>) iter, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> iter) =&gt; iter a) -&gt; m a</li><li class="src short"><a href="#v:runBalanceMapIterator">runBalanceMapIterator</a> :: <span class="keyword">forall</span> v m a. <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; (<span class="keyword">forall</span> iter. (<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Util-Iterator.html#t:MonadIterator">MonadIterator</a> v iter, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> iter) =&gt; iter a) -&gt; (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterType">IterType</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a> -&gt; v) -&gt; m a</li><li class="src short"><a href="#v:runBalanceIterBootstrap">runBalanceIterBootstrap</a> :: <span class="keyword">forall</span> m a. <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Util-Iterator.html#t:ListHolderT">ListHolderT</a> (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterType">IterType</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a>) m a -&gt; m a</li><li class="src short"><a href="#v:sanityCheckBalances">sanityCheckBalances</a> :: (<a href="http://hackage.haskell.org/package/exceptions-0.8.3/docs/Control-Monad-Catch.html#t:MonadMask">MonadMask</a> m, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/log-warper-1.1.2/docs/System-Wlog-CanLog.html#t:WithLogger">WithLogger</a> m) =&gt; m ()</li><li class="src short"><a href="#v:getTxOutFromDB">getTxOutFromDB</a> :: (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="http://hackage.haskell.org/package/exceptions-0.8.3/docs/Control-Monad-Catch.html#t:MonadThrow">MonadThrow</a> m) =&gt; <a href="Pos-Txp-Core.html#t:TxIn">TxIn</a> -&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Types.html#t:DB">DB</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Pos-Txp-Core.html#t:TxOutAux">TxOutAux</a>)</li><li class="src short"><a href="#v:getTxOut">getTxOut</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="Pos-Txp-Core.html#t:TxIn">TxIn</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Pos-Txp-Core.html#t:TxOutAux">TxOutAux</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:UtxoOp">UtxoOp</a><ul class="subs"><li>= <a href="#v:DelTxIn">DelTxIn</a> !<a href="Pos-Txp-Core.html#t:TxIn">TxIn</a></li><li>| <a href="#v:AddTxOut">AddTxOut</a> !<a href="Pos-Txp-Core.html#t:TxIn">TxIn</a> !<a href="Pos-Txp-Core.html#t:TxOutAux">TxOutAux</a></li></ul></li><li class="src short"><a href="#v:prepareGStateUtxo">prepareGStateUtxo</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="Pos-Txp.html#t:Utxo">Utxo</a> -&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:UtxoIter">UtxoIter</a></li><li class="src short"><a href="#v:runUtxoIterator">runUtxoIterator</a> :: <span class="keyword">forall</span> i m a. (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:DBIteratorClass">DBIteratorClass</a> i, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterKey">IterKey</a> i ~ <a href="Pos-Txp-Core.html#t:TxIn">TxIn</a>, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterValue">IterValue</a> i ~ <a href="Pos-Txp-Core.html#t:TxOutAux">TxOutAux</a>) =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-DBIterator.html#t:DBnIterator">DBnIterator</a> i a -&gt; m a</li><li class="src short"><a href="#v:runUtxoMapIterator">runUtxoMapIterator</a> :: <span class="keyword">forall</span> i v m a. (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:DBIteratorClass">DBIteratorClass</a> i, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterKey">IterKey</a> i ~ <a href="Pos-Txp-Core.html#t:TxIn">TxIn</a>, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterValue">IterValue</a> i ~ <a href="Pos-Txp-Core.html#t:TxOutAux">TxOutAux</a>) =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-DBIterator.html#t:DBnMapIterator">DBnMapIterator</a> i v a -&gt; (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterType">IterType</a> i -&gt; v) -&gt; m a</li><li class="src short"><a href="#v:getFilteredUtxo">getFilteredUtxo</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Address">Address</a> -&gt; m <a href="Pos-Txp.html#t:Utxo">Utxo</a></li><li class="src short"><a href="#v:getAllPotentiallyHugeUtxo">getAllPotentiallyHugeUtxo</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; m <a href="Pos-Txp.html#t:Utxo">Utxo</a></li><li class="src short"><a href="#v:sanityCheckUtxo">sanityCheckUtxo</a> :: (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/log-warper-1.1.2/docs/System-Wlog-CanLog.html#t:WithLogger">WithLogger</a> m) =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; m ()</li><li class="src short">module <a href="http://hackage.haskell.org/package/cryptokami-sl-update-0.4.4/docs/Pos-Update-DB.html">Pos.Update.DB</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:resolveForwardLink" class="def">resolveForwardLink</a> :: (<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Class.html#t:HasHeaderHash">HasHeaderHash</a> a, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; a -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a>) <a href="src/Pos.DB.GState.BlockExtra.html#resolveForwardLink" class="link">Source</a> <a href="#v:resolveForwardLink" class="selflink">#</a></p><div class="doc"><p>Tries to retrieve next block using current one (given a block/header).</p></div></div><div class="top"><p class="src"><a id="v:isBlockInMainChain" class="def">isBlockInMainChain</a> :: (<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Class.html#t:HasHeaderHash">HasHeaderHash</a> a, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; a -&gt; m <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Pos.DB.GState.BlockExtra.html#isBlockInMainChain" class="link">Source</a> <a href="#v:isBlockInMainChain" class="selflink">#</a></p><div class="doc"><p>Check if given hash representing block is in main chain.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BlockExtraOp" class="def">BlockExtraOp</a> <a href="src/Pos.DB.GState.BlockExtra.html#BlockExtraOp" class="link">Source</a> <a href="#t:BlockExtraOp" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:AddForwardLink" class="def">AddForwardLink</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a></td><td class="doc"><p>Adds or overwrites forward link</p></td></tr><tr><td class="src"><a id="v:RemoveForwardLink" class="def">RemoveForwardLink</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a></td><td class="doc"><p>Removes forward link</p></td></tr><tr><td class="src"><a id="v:SetInMainChain" class="def">SetInMainChain</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a></td><td class="doc"><p>Enables or disables &quot;in main chain&quot; status of the block</p></td></tr></table></div><div class="subs instances"><p id="control.i:BlockExtraOp" class="caption collapser" onclick="toggleSection('i:BlockExtraOp')">Instances</p><div id="section.i:BlockExtraOp" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:BlockExtraOp:Show:1" class="instance expander" onclick="toggleSection('i:id:BlockExtraOp:Show:1')"></span> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:Show">Show</a> <a href="Pos-DB-GState.html#t:BlockExtraOp">BlockExtraOp</a></span> <a href="src/Pos.DB.GState.BlockExtra.html#line-62" class="link">Source</a> <a href="#t:BlockExtraOp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:BlockExtraOp:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Int.html#t:Int">Int</a> -&gt; <a href="Pos-DB-GState.html#t:BlockExtraOp">BlockExtraOp</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Pos-DB-GState.html#t:BlockExtraOp">BlockExtraOp</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Pos-DB-GState.html#t:BlockExtraOp">BlockExtraOp</a>] -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:BlockExtraOp:RocksBatchOp:2" class="instance expander" onclick="toggleSection('i:id:BlockExtraOp:RocksBatchOp:2')"></span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Functions.html#t:RocksBatchOp">RocksBatchOp</a> <a href="Pos-DB-GState.html#t:BlockExtraOp">BlockExtraOp</a></span> <a href="src/Pos.DB.GState.BlockExtra.html#line-72" class="link">Source</a> <a href="#t:BlockExtraOp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:BlockExtraOp:RocksBatchOp:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toBatchOp">toBatchOp</a> :: <a href="Pos-DB-GState.html#t:BlockExtraOp">BlockExtraOp</a> -&gt; [<a href="http://hackage.haskell.org/package/rocksdb-0.1.0.1/docs/Database-RocksDB-Types.html#t:BatchOp">BatchOp</a>] <a href="#v:toBatchOp" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:BlockExtraOp:Buildable:3" class="instance expander" onclick="toggleSection('i:id:BlockExtraOp:Buildable:3')"></span> <a href="http://hackage.haskell.org/package/formatting-6.2.4/docs/Formatting-Formatters.html#t:Buildable">Buildable</a> <a href="Pos-DB-GState.html#t:BlockExtraOp">BlockExtraOp</a></span> <a href="src/Pos.DB.GState.BlockExtra.html#line-64" class="link">Source</a> <a href="#t:BlockExtraOp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:BlockExtraOp:Buildable:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:build">build</a> :: <a href="Pos-DB-GState.html#t:BlockExtraOp">BlockExtraOp</a> -&gt; <a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text-Lazy-Builder.html#t:Builder">Builder</a> <a href="#v:build" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:loadHeadersUpWhile" class="def">loadHeadersUpWhile</a> :: (<a href="Pos-Ssc-Class.html#t:SscHelpersClass">SscHelpersClass</a> ssc, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Class.html#t:HasHeaderHash">HasHeaderHash</a> a) =&gt; a -&gt; (<a href="Pos-Types-Block-Types.html#t:BlockHeader">BlockHeader</a> ssc -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Int.html#t:Int">Int</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; m (<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Util-Chrono.html#t:OldestFirst">OldestFirst</a> [] (<a href="Pos-Types-Block-Types.html#t:BlockHeader">BlockHeader</a> ssc)) <a href="src/Pos.DB.GState.BlockExtra.html#loadHeadersUpWhile" class="link">Source</a> <a href="#v:loadHeadersUpWhile" class="selflink">#</a></p><div class="doc"><p>Returns headers loaded up.</p></div></div><div class="top"><p class="src"><a id="v:loadBlocksUpWhile" class="def">loadBlocksUpWhile</a> :: (<a href="Pos-Ssc-Class.html#t:SscHelpersClass">SscHelpersClass</a> ssc, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Class.html#t:HasHeaderHash">HasHeaderHash</a> a) =&gt; a -&gt; (<a href="Pos-Types-Block-Types.html#t:Block">Block</a> ssc -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Int.html#t:Int">Int</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a>) -&gt; m (<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Util-Chrono.html#t:OldestFirst">OldestFirst</a> [] (<a href="Pos-Types-Block-Types.html#t:Block">Block</a> ssc)) <a href="src/Pos.DB.GState.BlockExtra.html#loadBlocksUpWhile" class="link">Source</a> <a href="#v:loadBlocksUpWhile" class="selflink">#</a></p><div class="doc"><p>Returns blocks loaded up.</p></div></div><div class="top"><p class="src"><a id="v:prepareGStateBlockExtra" class="def">prepareGStateBlockExtra</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a> -&gt; m () <a href="src/Pos.DB.GState.BlockExtra.html#prepareGStateBlockExtra" class="link">Source</a> <a href="#v:prepareGStateBlockExtra" class="selflink">#</a></p></div><div class="top"><p class="src">module <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-GState-Common.html">Pos.DB.GState.Common</a></p></div><div class="top"><p class="src"><a id="v:prepareGStateDB" class="def">prepareGStateDB</a> :: <span class="keyword">forall</span> ssc m. (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a> -&gt; m () <a href="src/Pos.DB.GState.GState.html#prepareGStateDB" class="link">Source</a> <a href="#v:prepareGStateDB" class="selflink">#</a></p><div class="doc"><p>Put missing initial data into GState DB.</p></div></div><div class="top"><p class="src"><a id="v:sanityCheckGStateDB" class="def">sanityCheckGStateDB</a> :: <span class="keyword">forall</span> m. (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/exceptions-0.8.3/docs/Control-Monad-Catch.html#t:MonadMask">MonadMask</a> m, <a href="http://hackage.haskell.org/package/log-warper-1.1.2/docs/System-Wlog-CanLog.html#t:WithLogger">WithLogger</a> m) =&gt; m () <a href="src/Pos.DB.GState.GState.html#sanityCheckGStateDB" class="link">Source</a> <a href="#v:sanityCheckGStateDB" class="selflink">#</a></p><div class="doc"><p>Check that GState DB is consistent.</p></div></div><div class="top"><p class="src"><a id="v:usingGStateSnapshot" class="def">usingGStateSnapshot</a> :: (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/exceptions-0.8.3/docs/Control-Monad-Catch.html#t:MonadMask">MonadMask</a> m) =&gt; m a -&gt; m a <a href="src/Pos.DB.GState.GState.html#usingGStateSnapshot" class="link">Source</a> <a href="#v:usingGStateSnapshot" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getPSKByIssuerAddressHash" class="def">getPSKByIssuerAddressHash</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="src/Pos.Delegation.DB.html#getPSKByIssuerAddressHash" class="link">Source</a> <a href="#v:getPSKByIssuerAddressHash" class="selflink">#</a></p><div class="doc"><p>Retrieves certificate by issuer address (hash of public key) if present.</p></div></div><div class="top"><p class="src"><a id="v:getPSKByIssuer" class="def">getPSKByIssuer</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Crypto-Signing.html#t:PublicKey">PublicKey</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="src/Pos.Delegation.DB.html#getPSKByIssuer" class="link">Source</a> <a href="#v:getPSKByIssuer" class="selflink">#</a></p><div class="doc"><p>Retrieves certificate by issuer public key if present.</p></div></div><div class="top"><p class="src"><a id="v:isIssuerByAddressHash" class="def">isIssuerByAddressHash</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Pos.Delegation.DB.html#isIssuerByAddressHash" class="link">Source</a> <a href="#v:isIssuerByAddressHash" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DelegationOp" class="def">DelegationOp</a> <a href="src/Pos.Delegation.DB.html#DelegationOp" class="link">Source</a> <a href="#t:DelegationOp" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:AddPSK" class="def">AddPSK</a> !<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a></td><td class="doc"><p>Adds PSK. Overwrites if present.</p></td></tr><tr><td class="src"><a id="v:DelPSK" class="def">DelPSK</a> !<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Crypto-Signing.html#t:PublicKey">PublicKey</a></td><td class="doc"><p>Removes PSK by issuer PK.</p></td></tr></table></div><div class="subs instances"><p id="control.i:DelegationOp" class="caption collapser" onclick="toggleSection('i:DelegationOp')">Instances</p><div id="section.i:DelegationOp" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DelegationOp:RocksBatchOp:1" class="instance expander" onclick="toggleSection('i:id:DelegationOp:RocksBatchOp:1')"></span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Functions.html#t:RocksBatchOp">RocksBatchOp</a> <a href="Pos-DB-GState.html#t:DelegationOp">DelegationOp</a></span> <a href="src/Pos.Delegation.DB.html#line-54" class="link">Source</a> <a href="#t:DelegationOp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DelegationOp:RocksBatchOp:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toBatchOp">toBatchOp</a> :: <a href="Pos-DB-GState.html#t:DelegationOp">DelegationOp</a> -&gt; [<a href="http://hackage.haskell.org/package/rocksdb-0.1.0.1/docs/Database-RocksDB-Types.html#t:BatchOp">BatchOp</a>] <a href="#v:toBatchOp" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:runPskIterator" class="def">runPskIterator</a> :: <span class="keyword">forall</span> m a. <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-DBIterator.html#t:DBnIterator">DBnIterator</a> PskIter a -&gt; m a <a href="src/Pos.Delegation.DB.html#runPskIterator" class="link">Source</a> <a href="#v:runPskIterator" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:runPskMapIterator" class="def">runPskMapIterator</a> :: <span class="keyword">forall</span> v m a. <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-DBIterator.html#t:DBnMapIterator">DBnMapIterator</a> PskIter v a -&gt; (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterType">IterType</a> PskIter -&gt; v) -&gt; m a <a href="src/Pos.Delegation.DB.html#runPskMapIterator" class="link">Source</a> <a href="#v:runPskMapIterator" class="selflink">#</a></p></div><h1 id="g:1">Operations</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BalancesOp" class="def">BalancesOp</a> <a href="src/Pos.Txp.DB.Balances.html#BalancesOp" class="link">Source</a> <a href="#t:BalancesOp" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PutFtsSum" class="def">PutFtsSum</a> !<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Coin">Coin</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:PutFtsStake" class="def">PutFtsStake</a> !<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> !<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Coin">Coin</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:BalancesOp" class="caption collapser" onclick="toggleSection('i:BalancesOp')">Instances</p><div id="section.i:BalancesOp" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:BalancesOp:RocksBatchOp:1" class="instance expander" onclick="toggleSection('i:id:BalancesOp:RocksBatchOp:1')"></span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Functions.html#t:RocksBatchOp">RocksBatchOp</a> <a href="Pos-DB-GState.html#t:BalancesOp">BalancesOp</a></span> <a href="src/Pos.Txp.DB.Balances.html#line-74" class="link">Source</a> <a href="#t:BalancesOp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:BalancesOp:RocksBatchOp:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toBatchOp">toBatchOp</a> :: <a href="Pos-DB-GState.html#t:BalancesOp">BalancesOp</a> -&gt; [<a href="http://hackage.haskell.org/package/rocksdb-0.1.0.1/docs/Database-RocksDB-Types.html#t:BatchOp">BatchOp</a>] <a href="#v:toBatchOp" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:BalancesOp:Buildable:2" class="instance expander" onclick="toggleSection('i:id:BalancesOp:Buildable:2')"></span> <a href="http://hackage.haskell.org/package/formatting-6.2.4/docs/Formatting-Formatters.html#t:Buildable">Buildable</a> <a href="Pos-DB-GState.html#t:BalancesOp">BalancesOp</a></span> <a href="src/Pos.Txp.DB.Balances.html#line-69" class="link">Source</a> <a href="#t:BalancesOp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:BalancesOp:Buildable:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:build">build</a> :: <a href="Pos-DB-GState.html#t:BalancesOp">BalancesOp</a> -&gt; <a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text-Lazy-Builder.html#t:Builder">Builder</a> <a href="#v:build" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h1 id="g:2">Getters</h1><div class="top"><p class="src"><a id="v:isBootstrapEra" class="def">isBootstrapEra</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; m <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="src/Pos.Txp.DB.Balances.html#isBootstrapEra" class="link">Source</a> <a href="#v:isBootstrapEra" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getEffectiveTotalStake" class="def">getEffectiveTotalStake</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; m <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Coin">Coin</a> <a href="src/Pos.Txp.DB.Balances.html#getEffectiveTotalStake" class="link">Source</a> <a href="#v:getEffectiveTotalStake" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getEffectiveStake" class="def">getEffectiveStake</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Coin">Coin</a>) <a href="src/Pos.Txp.DB.Balances.html#getEffectiveStake" class="link">Source</a> <a href="#v:getEffectiveStake" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:genesisFakeTotalStake" class="def">genesisFakeTotalStake</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Coin">Coin</a> <a href="src/Pos.Txp.DB.Balances.html#genesisFakeTotalStake" class="link">Source</a> <a href="#v:genesisFakeTotalStake" class="selflink">#</a></p></div><h1 id="g:3">Initialization</h1><div class="top"><p class="src"><a id="v:prepareGStateBalances" class="def">prepareGStateBalances</a> :: <span class="keyword">forall</span> m. <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="Pos-Txp.html#t:Utxo">Utxo</a> -&gt; m () <a href="src/Pos.Txp.DB.Balances.html#prepareGStateBalances" class="link">Source</a> <a href="#v:prepareGStateBalances" class="selflink">#</a></p></div><h1 id="g:4">Iteration</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BalanceIter" class="def">BalanceIter</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="#t:BalanceIter" class="selflink">#</a></p><div class="subs instances"><p id="control.i:BalanceIter" class="caption collapser" onclick="toggleSection('i:BalanceIter')">Instances</p><div id="section.i:BalanceIter" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:BalanceIter:DBIteratorClass:1" class="instance expander" onclick="toggleSection('i:id:BalanceIter:DBIteratorClass:1')"></span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:DBIteratorClass">DBIteratorClass</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:BalanceIter:DBIteratorClass:1" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterKey">IterKey</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="#t:IterKey" class="selflink">#</a></p><p class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterValue">IterValue</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="#t:IterValue" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:iterKeyPrefix">iterKeyPrefix</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Proxy.html#t:Proxy">Proxy</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a> -&gt; <a href="http://hackage.haskell.org/package/bytestring-0.10.8.1/docs/Data-ByteString.html#t:ByteString">ByteString</a> <a href="#v:iterKeyPrefix" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:BalanceIter:IterValue:2" class="instance expander" onclick="toggleSection('i:id:BalanceIter:IterValue:2')"></span> <span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterValue">IterValue</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:BalanceIter:IterValue:2" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterValue">IterValue</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a> = <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Coin">Coin</a></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:BalanceIter:IterKey:3" class="instance expander" onclick="toggleSection('i:id:BalanceIter:IterKey:3')"></span> <span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterKey">IterKey</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:BalanceIter:IterKey:3" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterKey">IterKey</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a> = <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:runBalanceIterator" class="def">runBalanceIterator</a> :: <span class="keyword">forall</span> m a. <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; (<span class="keyword">forall</span> iter. (<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Util-Iterator.html#t:MonadIterator">MonadIterator</a> (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterType">IterType</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a>) iter, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> iter) =&gt; iter a) -&gt; m a <a href="src/Pos.Txp.DB.Balances.html#runBalanceIterator" class="link">Source</a> <a href="#v:runBalanceIterator" class="selflink">#</a></p><div class="doc"><p>Run iterator over effective balances.</p></div></div><div class="top"><p class="src"><a id="v:runBalanceMapIterator" class="def">runBalanceMapIterator</a> :: <span class="keyword">forall</span> v m a. <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; (<span class="keyword">forall</span> iter. (<a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Util-Iterator.html#t:MonadIterator">MonadIterator</a> v iter, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> iter) =&gt; iter a) -&gt; (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterType">IterType</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a> -&gt; v) -&gt; m a <a href="src/Pos.Txp.DB.Balances.html#runBalanceMapIterator" class="link">Source</a> <a href="#v:runBalanceMapIterator" class="selflink">#</a></p><div class="doc"><p>Run map iterator over effective balances.</p></div></div><div class="top"><p class="src"><a id="v:runBalanceIterBootstrap" class="def">runBalanceIterBootstrap</a> :: <span class="keyword">forall</span> m a. <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Util-Iterator.html#t:ListHolderT">ListHolderT</a> (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterType">IterType</a> <a href="Pos-DB-GState.html#t:BalanceIter">BalanceIter</a>) m a -&gt; m a <a href="src/Pos.Txp.DB.Balances.html#runBalanceIterBootstrap" class="link">Source</a> <a href="#v:runBalanceIterBootstrap" class="selflink">#</a></p></div><h1 id="g:5">Sanity checks</h1><div class="top"><p class="src"><a id="v:sanityCheckBalances" class="def">sanityCheckBalances</a> :: (<a href="http://hackage.haskell.org/package/exceptions-0.8.3/docs/Control-Monad-Catch.html#t:MonadMask">MonadMask</a> m, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/log-warper-1.1.2/docs/System-Wlog-CanLog.html#t:WithLogger">WithLogger</a> m) =&gt; m () <a href="src/Pos.Txp.DB.Balances.html#sanityCheckBalances" class="link">Source</a> <a href="#v:sanityCheckBalances" class="selflink">#</a></p></div><h1 id="g:6">Getters</h1><div class="top"><p class="src"><a id="v:getTxOutFromDB" class="def">getTxOutFromDB</a> :: (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="http://hackage.haskell.org/package/exceptions-0.8.3/docs/Control-Monad-Catch.html#t:MonadThrow">MonadThrow</a> m) =&gt; <a href="Pos-Txp-Core.html#t:TxIn">TxIn</a> -&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Types.html#t:DB">DB</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Pos-Txp-Core.html#t:TxOutAux">TxOutAux</a>) <a href="src/Pos.Txp.DB.Utxo.html#getTxOutFromDB" class="link">Source</a> <a href="#v:getTxOutFromDB" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getTxOut" class="def">getTxOut</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="Pos-Txp-Core.html#t:TxIn">TxIn</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Pos-Txp-Core.html#t:TxOutAux">TxOutAux</a>) <a href="src/Pos.Txp.DB.Utxo.html#getTxOut" class="link">Source</a> <a href="#v:getTxOut" class="selflink">#</a></p></div><h1 id="g:7">Operations</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:UtxoOp" class="def">UtxoOp</a> <a href="src/Pos.Txp.DB.Utxo.html#UtxoOp" class="link">Source</a> <a href="#t:UtxoOp" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DelTxIn" class="def">DelTxIn</a> !<a href="Pos-Txp-Core.html#t:TxIn">TxIn</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:AddTxOut" class="def">AddTxOut</a> !<a href="Pos-Txp-Core.html#t:TxIn">TxIn</a> !<a href="Pos-Txp-Core.html#t:TxOutAux">TxOutAux</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:UtxoOp" class="caption collapser" onclick="toggleSection('i:UtxoOp')">Instances</p><div id="section.i:UtxoOp" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:UtxoOp:RocksBatchOp:1" class="instance expander" onclick="toggleSection('i:id:UtxoOp:RocksBatchOp:1')"></span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Functions.html#t:RocksBatchOp">RocksBatchOp</a> <a href="Pos-DB-GState.html#t:UtxoOp">UtxoOp</a></span> <a href="src/Pos.Txp.DB.Utxo.html#line-82" class="link">Source</a> <a href="#t:UtxoOp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:UtxoOp:RocksBatchOp:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toBatchOp">toBatchOp</a> :: <a href="Pos-DB-GState.html#t:UtxoOp">UtxoOp</a> -&gt; [<a href="http://hackage.haskell.org/package/rocksdb-0.1.0.1/docs/Database-RocksDB-Types.html#t:BatchOp">BatchOp</a>] <a href="#v:toBatchOp" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:UtxoOp:Buildable:2" class="instance expander" onclick="toggleSection('i:id:UtxoOp:Buildable:2')"></span> <a href="http://hackage.haskell.org/package/formatting-6.2.4/docs/Formatting-Formatters.html#t:Buildable">Buildable</a> <a href="Pos-DB-GState.html#t:UtxoOp">UtxoOp</a></span> <a href="src/Pos.Txp.DB.Utxo.html#line-75" class="link">Source</a> <a href="#t:UtxoOp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:UtxoOp:Buildable:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:build">build</a> :: <a href="Pos-DB-GState.html#t:UtxoOp">UtxoOp</a> -&gt; <a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text-Lazy-Builder.html#t:Builder">Builder</a> <a href="#v:build" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h1 id="g:8">Initialization</h1><div class="top"><p class="src"><a id="v:prepareGStateUtxo" class="def">prepareGStateUtxo</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="Pos-Txp.html#t:Utxo">Utxo</a> -&gt; m () <a href="src/Pos.Txp.DB.Utxo.html#prepareGStateUtxo" class="link">Source</a> <a href="#v:prepareGStateUtxo" class="selflink">#</a></p></div><h1 id="g:9">Iteration</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:UtxoIter" class="def">UtxoIter</a> <a href="src/Pos.Txp.DB.Utxo.html#UtxoIter" class="link">Source</a> <a href="#t:UtxoIter" class="selflink">#</a></p><div class="subs instances"><p id="control.i:UtxoIter" class="caption collapser" onclick="toggleSection('i:UtxoIter')">Instances</p><div id="section.i:UtxoIter" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:UtxoIter:DBIteratorClass:1" class="instance expander" onclick="toggleSection('i:id:UtxoIter:DBIteratorClass:1')"></span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:DBIteratorClass">DBIteratorClass</a> <a href="Pos-DB-GState.html#t:UtxoIter">UtxoIter</a></span> <a href="src/Pos.Txp.DB.Utxo.html#line-108" class="link">Source</a> <a href="#t:UtxoIter" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:UtxoIter:DBIteratorClass:1" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterKey">IterKey</a> <a href="Pos-DB-GState.html#t:UtxoIter">UtxoIter</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="#t:IterKey" class="selflink">#</a></p><p class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterValue">IterValue</a> <a href="Pos-DB-GState.html#t:UtxoIter">UtxoIter</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="#t:IterValue" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:iterKeyPrefix">iterKeyPrefix</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Proxy.html#t:Proxy">Proxy</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="Pos-DB-GState.html#t:UtxoIter">UtxoIter</a> -&gt; <a href="http://hackage.haskell.org/package/bytestring-0.10.8.1/docs/Data-ByteString.html#t:ByteString">ByteString</a> <a href="#v:iterKeyPrefix" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:UtxoIter:IterValue:2" class="instance expander" onclick="toggleSection('i:id:UtxoIter:IterValue:2')"></span> <span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterValue">IterValue</a> <a href="Pos-DB-GState.html#t:UtxoIter">UtxoIter</a></span> <a href="src/Pos.Txp.DB.Utxo.html#line-110" class="link">Source</a> <a href="#t:UtxoIter" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:UtxoIter:IterValue:2" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterValue">IterValue</a> <a href="Pos-DB-GState.html#t:UtxoIter">UtxoIter</a> = <a href="Pos-Txp-Core.html#t:TxOutAux">TxOutAux</a></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:UtxoIter:IterKey:3" class="instance expander" onclick="toggleSection('i:id:UtxoIter:IterKey:3')"></span> <span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterKey">IterKey</a> <a href="Pos-DB-GState.html#t:UtxoIter">UtxoIter</a></span> <a href="src/Pos.Txp.DB.Utxo.html#line-109" class="link">Source</a> <a href="#t:UtxoIter" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:UtxoIter:IterKey:3" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterKey">IterKey</a> <a href="Pos-DB-GState.html#t:UtxoIter">UtxoIter</a> = <a href="Pos-Txp-Core.html#t:TxIn">TxIn</a></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:runUtxoIterator" class="def">runUtxoIterator</a> :: <span class="keyword">forall</span> i m a. (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:DBIteratorClass">DBIteratorClass</a> i, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterKey">IterKey</a> i ~ <a href="Pos-Txp-Core.html#t:TxIn">TxIn</a>, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterValue">IterValue</a> i ~ <a href="Pos-Txp-Core.html#t:TxOutAux">TxOutAux</a>) =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-DBIterator.html#t:DBnIterator">DBnIterator</a> i a -&gt; m a <a href="src/Pos.Txp.DB.Utxo.html#runUtxoIterator" class="link">Source</a> <a href="#v:runUtxoIterator" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:runUtxoMapIterator" class="def">runUtxoMapIterator</a> :: <span class="keyword">forall</span> i v m a. (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:DBIteratorClass">DBIteratorClass</a> i, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterKey">IterKey</a> i ~ <a href="Pos-Txp-Core.html#t:TxIn">TxIn</a>, <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterValue">IterValue</a> i ~ <a href="Pos-Txp-Core.html#t:TxOutAux">TxOutAux</a>) =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-DBIterator.html#t:DBnMapIterator">DBnMapIterator</a> i v a -&gt; (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Iterator-Class.html#t:IterType">IterType</a> i -&gt; v) -&gt; m a <a href="src/Pos.Txp.DB.Utxo.html#runUtxoMapIterator" class="link">Source</a> <a href="#v:runUtxoMapIterator" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getFilteredUtxo" class="def">getFilteredUtxo</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Address">Address</a> -&gt; m <a href="Pos-Txp.html#t:Utxo">Utxo</a> <a href="src/Pos.Txp.DB.Utxo.html#getFilteredUtxo" class="link">Source</a> <a href="#v:getFilteredUtxo" class="selflink">#</a></p></div><h1 id="g:10">Get utxo</h1><div class="top"><p class="src"><a id="v:getAllPotentiallyHugeUtxo" class="def">getAllPotentiallyHugeUtxo</a> :: <a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; m <a href="Pos-Txp.html#t:Utxo">Utxo</a> <a href="src/Pos.Txp.DB.Utxo.html#getAllPotentiallyHugeUtxo" class="link">Source</a> <a href="#v:getAllPotentiallyHugeUtxo" class="selflink">#</a></p><div class="doc"><p>Get full utxo. Use with care &#8211; the utxo can be very big (hundreds of
 megabytes).</p></div></div><h1 id="g:11">Sanity checks</h1><div class="top"><p class="src"><a id="v:sanityCheckUtxo" class="def">sanityCheckUtxo</a> :: (<a href="http://hackage.haskell.org/package/cryptokami-sl-db-0.4.4/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/log-warper-1.1.2/docs/System-Wlog-CanLog.html#t:WithLogger">WithLogger</a> m) =&gt; <a href="http://hackage.haskell.org/package/cryptokami-sl-core-0.4.4/docs/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; m () <a href="src/Pos.Txp.DB.Utxo.html#sanityCheckUtxo" class="link">Source</a> <a href="#v:sanityCheckUtxo" class="selflink">#</a></p></div><div class="top"><p class="src">module <a href="http://hackage.haskell.org/package/cryptokami-sl-update-0.4.4/docs/Pos-Update-DB.html">Pos.Update.DB</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>